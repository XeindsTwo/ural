<section class="participation indent" id="participation">
  <div class="container">
    <h2 class="participation__title title-section">
      Принять <span>участие</span> <br> в конкурсе
    </h2>
    <div id="app">
      <form @submit.prevent="validateForm" class="participation__form" action="">
        <div class="participation__block">
          <span class="participation__label">Заполните контактные данные</span>
          <span class="error" :class="{ active: errors.region }">Пожалуйста, выберите регион</span>
          <span class="error" :class="{ active: errors.contact }">Пожалуйста, заполните все поля</span>
          <span class="error" :class="{ active: errors.emailInvalid }">Пожалуйста, введите корректный адрес электронной почты</span>
          <div class="participation__fields">
            <label>
              <input v-model="form.contact.phone" class="input" type="text" name="phone" id="phone" data-tel-input
                     placeholder="Свой номер телефона" maxlength="30"
                     :class="{ 'input--error': errors.contact && !form.contact.phone }">
            </label>
            <label>
              <input v-model="form.contact.messenger" class="input" type="text" name="messenger" id="messenger"
                     placeholder="Электронная почта" maxlength="255"
                     :class="{ 'input--error': errors.contact && !form.contact.messenger }">
            </label>
            <label class="participation__fields long" for="mySelect">
              <select id="mySelect" class="choices" placeholder="Выберите регион">
                <option value="" disabled selected hidden>Выберите регион</option>
                <option value="Адыгея">Республика Адыгея</option>
                <option value="Алтай">Республика Алтай</option>
                <option value="Башкортостан">Республика Башкортостан</option>
                <option value="Бурятия">Республика Бурятия</option>
                <option value="Дагестан">Республика Дагестан</option>
                <option value="Ингушетия">Республика Ингушетия</option>
                <option value="Кабардино-Балкария">Кабардино-Балкарская Республика</option>
                <option value="Калмыкия">Республика Калмыкия</option>
                <option value="Карачаево-Черкессия">Карачаево-Черкесская Республика</option>
                <option value="Карелия">Республика Карелия</option>
                <option value="Коми">Республика Коми</option>
                <option value="Марий Эл">Республика Марий Эл</option>
                <option value="Мордовия">Республика Мордовия</option>
                <option value="Саха (Якутия)">Республика Саха (Якутия)</option>
                <option value="Северная Осетия - Алания">Республика Северная Осетия - Алания</option>
                <option value="Татарстан">Республика Татарстан</option>
                <option value="Тыва">Республика Тыва</option>
                <option value="Удмуртская">Удмуртская Республика</option>
                <option value="Хакасия">Республика Хакасия</option>
                <option value="Чеченская">Чеченская Республика</option>
                <option value="Чувашская Республика">Чувашская Республика</option>
                <option value="Алтайский край">Алтайский край</option>
                <option value="Забайкальский край">Забайкальский край</option>
                <option value="Камчатский край">Камчатский край</option>
                <option value="Краснодарский край">Краснодарский край</option>
                <option value="Красноярский край">Красноярский край</option>
                <option value="Пермский край">Пермский край</option>
                <option value="Приморский край">Приморский край</option>
                <option value="Ставропольский край">Ставропольский край</option>
                <option value="Хабаровский край">Хабаровский край</option>
                <option value="Амурская область">Амурская область</option>
                <option value="Архангельская область">Архангельская область</option>
                <option value="Астраханская область">Астраханская область</option>
                <option value="Белгородская область">Белгородская область</option>
                <option value="Брянская область">Брянская область</option>
                <option value="Владимирская область">Владимирская область</option>
                <option value="Волгоградская область">Волгоградская область</option>
                <option value="Вологодская область">Вологодская область</option>
                <option value="Воронежская область">Воронежская область</option>
                <option value="Ивановская область">Ивановская область</option>
                <option value="Иркутская область">Иркутская область</option>
                <option value="Калининградская область">Калининградская область</option>
                <option value="Калужская область">Калужская область</option>
                <option value="Кемеровская область">Кемеровская область</option>
                <option value="Кировская область">Кировская область</option>
                <option value="Костромская область">Костромская область</option>
                <option value="Курганская область">Курганская область</option>
                <option value="Курская область">Курская область</option>
                <option value="Ленинградская область">Ленинградская область</option>
                <option value="Липецкая область">Липецкая область</option>
                <option value="Магаданская область">Магаданская область</option>
                <option value="Московская область">Московская область</option>
                <option value="Мурманская область">Мурманская область</option>
                <option value="Нижегородская область">Нижегородская область</option>
                <option value="Новгородская область">Новгородская область</option>
                <option value="Новосибирская область">Новосибирская область</option>
                <option value="Омская область">Омская область</option>
                <option value="Оренбургская область">Оренбургская область</option>
                <option value="Орловская область">Орловская область</option>
                <option value="Пензенская область">Пензенская область</option>
                <option value="Псковская область">Псковская область</option>
                <option value="Ростовская область">Ростовская область</option>
                <option value="Рязанская область">Рязанская область</option>
                <option value="Самарская область">Самарская область</option>
                <option value="Саратовская область">Саратовская область</option>
                <option value="Сахалинская область">Сахалинская область</option>
                <option value="Свердловская область">Свердловская область</option>
                <option value="Смоленская область">Смоленская область</option>
                <option value="Тамбовская область">Тамбовская область</option>
                <option value="Тверская область">Тверская область</option>
                <option value="Томская область">Томская область</option>
                <option value="Тульская область">Тульская область</option>
                <option value="Тюменская область">Тюменская область</option>
                <option value="Ульяновская область">Ульяновская область</option>
                <option value="Челябинская область">Челябинская область</option>
                <option value="Ярославская область">Ярославская область</option>
                <option value="Москва">Москва</option>
                <option value="Санкт-Петербург">Санкт-Петербург</option>
                <option value="Еврейская АО">Еврейская АО</option>
                <option value="Ненецкий АО">Ненецкий АО</option>
                <option value="Ханты-Мансийский АО">Ханты-Мансийский АО</option>
                <option value="Чукотский АО">Чукотский АО</option>
                <option value="Ямало-Ненецкий АО">Ямало-Ненецкий АО</option>
              </select>
            </label>
          </div>
        </div>
        <div class="participation__block">
          <span class="participation__label">Заполните свои личные данные</span>
          <span class="error" :class="{ active: errors.personal }">Пожалуйста, заполните все поля</span>
          <span class="error active" v-if="errors.ageMin">Минимальный возраст - 10 лет</span>
          <span class="error active" v-if="errors.ageMax">Максимальный возраст - 70 лет</span>
          <div class="participation__fields">
            <label>
              <input v-model="form.personal.fullName" class="input" type="text" name="fullName" id="fullName"
                     placeholder="ФИО" maxlength="255"
                     :class="{ 'input--error': errors.personal && !form.personal.fullName }">
            </label>
            <label>
              <input v-model="form.personal.age" class="input" type="number" name="age" id="age" placeholder="Возраст"
                     :class="{ 'input--error': (errors.personal || errors.ageMin || errors.ageMax) && !form.personal.age }">
            </label>
            <label class="participation__fields long">
              <input v-model="form.personal.address" class="input" type="text" name="address" id="address"
                     placeholder="Место проживания" maxlength="255"
                     :class="{ 'input--error': errors.personal && !form.personal.address }">
            </label>
          </div>
        </div>
        <div class="participation__block">
          <span class="participation__label">Педагог <span>(при наличии)</span></span>
          <span class="error" :class="{ active: errors.teacher }">Пожалуйста, заполните все поля</span>
          <div class="participation__fields">
            <label class="participation__fields long">
              <input v-model="form.teacher.fullName" class="input" type="text" name="teacher_fullName"
                     id="teacher_fullName" placeholder="ФИО" maxlength="255"
                     :class="{ 'input--error': errors.teacher && !form.teacher.fullName }">
            </label>
            <label class="participation__fields long">
              <input v-model="form.teacher.schoolName" class="input" type="text" name="teacher_schoolName"
                     id="teacher_schoolName" placeholder="Название школы" maxlength="255"
                     :class="{ 'input--error': errors.teacher && !form.teacher.schoolName }">
            </label>
          </div>
        </div>
        <div class="participation__block">
          <span class="participation__label">Видеозапись</span>
          <span class="error" :class="{ active: errors.video }">Ошибка загрузки видео, повторите попытку</span>
          <span class="error" :class="{ active: errors.videoRequired }">Пожалуйста, загрузите видео</span>
          <span class="error" :class="{ active: errors.invalidFileType }">Загружать можно только видеофайлы</span>
          <div class="participation__loader">
            <label for="video" class="participation__load"
                   :class="{ loading: form.video, 'error-load': errors.videoSizeExceeded }">
              <img src="images/icons/load.svg" alt="load icon">
              <div class="participation__info">
                <span class="participation__text">Перетащите сюда, для загрузки</span>
                <div class="participation__file">
                  <span class="participation__size">Максимальный размер: 3.5 ГБ</span>
                  <span class="participation__file-load" v-if="form.video">Видео загружено</span>
                </div>
              </div>
            </label>
            <input type="file" id="video" name="video" accept="video/*" @change="handleFileChange"
                   style="display: none;">
          </div>
        </div>
        <span class="error" :class="{ active: errors.formSubmission }">Произошла ошибка при отправке заявки, попробуйте ещё раз позже</span>
        <button class="participation__btn" type="submit" :disabled="submitting">
          <svg v-if="submitting" class="circular-loader" viewBox="25 25 50 50">
            <circle class="loader-path" cx="50" cy="50" r="20" fill="none" stroke="#031F03" stroke-width="3"/>
          </svg>
          <span v-if="!submitting">Приступить к оплате</span>
          <span v-else>Отправка данных</span>
        </button>
        <div class="participation__contact">
          <span>Контакты для связи:</span>
          <div>
            Почта: <a href="mailto:support@northernworld.ru">support@northernworld.ru</a>
          </div>
          <div class="participation__contact-socials">
            <a class="whatsapp" href="https://wa.me/79935234862" target="_blank">
              <span class="sr-only">Мессенджер WhatsApp</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
                <path
                    d="M0 30L2.11881 22.2962C0.811354 20.0412 0.124341 17.485 0.125597 14.8637C0.129364 6.66875 6.82994 0 15.0628 0C19.058 0.00125 22.8083 1.55 25.6292 4.36C28.4489 7.17 30.0013 10.905 30 14.8775C29.9962 23.0738 23.2957 29.7425 15.0628 29.7425C12.5634 29.7413 10.1005 29.1175 7.91886 27.9325L0 30ZM8.28561 25.2413C10.3906 26.485 12.4001 27.23 15.0578 27.2312C21.9003 27.2312 27.4743 21.6887 27.478 14.875C27.4805 8.0475 21.9329 2.5125 15.0678 2.51C8.2203 2.51 2.65009 8.0525 2.64758 14.865C2.64632 17.6463 3.46521 19.7287 4.84049 21.9075L3.58578 26.4675L8.28561 25.2413ZM22.5873 18.4113C22.4943 18.2563 22.2457 18.1637 21.8714 17.9775C21.4984 17.7912 19.6634 16.8925 19.3205 16.7687C18.9789 16.645 18.7302 16.5825 18.4803 16.955C18.2316 17.3263 17.5157 18.1638 17.2984 18.4113C17.0811 18.6588 16.8626 18.69 16.4896 18.5038C16.1166 18.3175 14.9133 17.9263 13.4878 16.66C12.3788 15.675 11.629 14.4588 11.4117 14.0863C11.1944 13.715 11.3891 13.5138 11.575 13.3288C11.7433 13.1625 11.948 12.895 12.1351 12.6775C12.3248 12.4625 12.3863 12.3075 12.5119 12.0588C12.6363 11.8113 12.5747 11.5938 12.4805 11.4075C12.3863 11.2225 11.6403 9.39375 11.3301 8.65C11.0261 7.92625 10.7184 8.02375 10.4898 8.0125L9.77393 8C9.52524 8 9.12082 8.0925 8.7792 8.465C8.43758 8.8375 7.473 9.735 7.473 11.5638C7.473 13.3925 8.8106 15.1587 8.99648 15.4062C9.18362 15.6537 11.6277 19.4063 15.3718 21.015C16.2622 21.3975 16.958 21.6262 17.4994 21.7975C18.3936 22.08 19.2075 22.04 19.8505 21.945C20.5677 21.8387 22.0585 21.0462 22.37 20.1787C22.6815 19.31 22.6815 18.5663 22.5873 18.4113Z"
                    fill="#fff"/>
              </svg>
            </a>
            <a class="telegram" href="https://t.me/northernworld" target="_blank">
              <span class="sr-only">Мессенджер Telegram</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="18" viewBox="0 0 21 18" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M1.44364 7.74888C7.08077 5.20867 10.8397 3.534 12.7206 2.72489C18.0907 0.414697 19.2065 0.0133926 19.9338 0.000141289C20.0938 -0.00277319 20.4514 0.0382296 20.6831 0.232668C20.8788 0.396848 20.9326 0.618632 20.9583 0.774293C20.9841 0.929954 21.0162 1.28455 20.9907 1.56163C20.6997 4.7241 19.4405 12.3986 18.7999 15.9406C18.5288 17.4394 17.9951 17.9419 17.4784 17.9911C16.3554 18.098 15.5027 17.2235 14.4151 16.4861C12.7132 15.3323 11.7517 14.614 10.0997 13.488C8.19056 12.1868 9.42819 11.4716 10.5162 10.3027C10.801 9.99686 15.7486 5.34226 15.8444 4.92001C15.8564 4.86721 15.8675 4.67036 15.7544 4.56642C15.6414 4.46248 15.4745 4.49802 15.3541 4.52629C15.1834 4.56636 12.4646 6.42501 7.19761 10.1022C6.42588 10.6503 5.72687 10.9174 5.10058 10.9034C4.41015 10.888 3.08204 10.4996 2.09473 10.1677C0.883743 9.76056 -0.0787216 9.5453 0.00508745 8.85385C0.0487404 8.4937 0.528258 8.12538 1.44364 7.74888Z"
                      fill="white"/>
              </svg>
            </a>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>